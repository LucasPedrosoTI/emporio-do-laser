<%- include('components/head') %> <%- include('components/navbar') %> <% const ehPF = USUARIO.Cliente.ehPessoaFisica; %>

<script src="/js/pagamento.js" defer></script>

<section class="corpo flex-fill">
  <div class="container" style="background-color: #ffff; padding: 30px">
    <form action="" class="needs-validation" method="" novalidate="">
      <div class="row">
        <div class="col-md">
          <h4 class="d-flex justify-content-between align-items-center mb-3">
            <span class="text-muted">Meus Dados</span>
          </h4>
          <div class="col-md list-group-item mb-4">
            <div class="d-flex w-100" style="max-height: 30px">
              <i class="bi bi-person-badge-fill"></i>
              <p class="ms-2"><%= ehPF ? USUARIO.Cliente.PessoaFisica.nome : USUARIO.Cliente.PessoaJuridica.razao_social %></p>
            </div>
            <div class="d-flex w-100" style="max-height: 30px">
              <i class="bi bi-envelope"></i>
              <p class="ms-2"><%= USUARIO.email %></p>
            </div>
            <div class="d-flex w-100" style="max-height: 30px">
              <i class="bi bi-telephone-fill"></i>
              <p class="ms-2"><%= USUARIO.Cliente.telefone %></p>
            </div>
            <div class="d-flex w-100" style="max-height: 30px">
              <i class="bi bi-card-heading"></i>
              <p class="ms-2"><%= ehPF ? USUARIO.Cliente.PessoaFisica.cpf : USUARIO.Cliente.PessoaJuridica.cnpj %></p>
            </div>
          </div>

          <h4 class="d-flex justify-content-between align-items-center mb-3">
            <span class="text-muted">Endereço de Entrega</span>
          </h4>
          <% if (enderecos.length > 0) { %>
          <select class="form-select mb-2" id="selectEndereco">
            <% enderecos.forEach(endereco => { %>
            <option value="<%= endereco.id %>"><%= endereco.destinatario %></option>
            <% }) %>
          </select>

          <div class="list-group-item">
            <p>
              <strong id="destinatario"><%= enderecos[0].destinatario %></strong>
            </p>
            <p>
              <strong>Endereço:</strong>
              <span id="rua"> <%= enderecos[0].rua %> </span>, <span id="numero"><%= enderecos[0].numero %></span>
            </p>
            <p>
              <strong>Complemento: </strong>
              <span id="complemento"><%= enderecos[0].complemento %></span>
            </p>
            <p><strong>Bairro: </strong> <span id="bairro"><%= enderecos[0].bairro %></span></p>
            <p><strong>Cidade: </strong> <span id="cidade"> <%= enderecos[0].cidade %> </span> - <span id="estado"><%= enderecos[0].estado %></span></p>
            <p>
              <strong>CEP: </strong>
              <span id="cep"> <%= enderecos[0].cep %> </span>
            </p>
          </div>
          <% } %>
        </div>

        <div class="col-md">
          <h4 class="d-flex justify-content-between align-items-center mb-3">
            <span class="text-muted">Cupom de Desconto</span>
          </h4>
          <div class="list-group-item mb-4">
            <div class="col-md">
              <label class="custom-control-label">Cupom</label>
              <input class="form-control mb-3" />
              <button class="btn btn-secondary w-100">Aplicar</button>
            </div>
          </div>

          <h4 class="d-flex justify-content-between align-items-center mb-3">
            <span class="text-muted">Pagamento</span>
          </h4>
          <div class="list-group-item">
            <div class="custom-control custom-radio">
              <input checked="" class="custom-control-input" id="credit" name="paymentMethod" required="" type="radio" value="CREDIT" />
              <label class="custom-control-label" for="credit">Cartão de crédito</label>
            </div>

            <div class="col-md mb-2">
              <label for="cc-name">Nome Completo</label>
              <input class="form-control" id="cc-name" name="cardName" placeholder="" required="" type="text" />
              <small class="text-muted">Nome completo como impresso no cartão</small>
              <div class="invalid-feedback">Insira o nome completo como impresso no cartão</div>
            </div>

            <div class="col-md mb-2">
              <label for="cc-number">Número</label>
              <input class="form-control" id="cc-number" name="cardNumber" placeholder="" required="" type="text" />
              <div class="invalid-feedback">Insira o Número do cartão</div>
            </div>

            <div class="row">
              <div class="col-md mb-2">
                <label for="cc-expiration">Validade</label>
                <input class="form-control" id="cc-expiration" name="cardDate" placeholder="" required="" type="text" />
                <div class="invalid-feedback">Insira a data de validade do cartão</div>
              </div>
              <div class="col-md mb-2">
                <label for="cc-cvv">CVV</label>
                <input class="form-control" id="cc-cvv" name="cardCvv" placeholder="" required="" type="text" />
                <div class="invalid-feedback">Insira o CVV</div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md mb-4">
          <h4 class="d-flex justify-content-between align-items-center mb-3">
            <span class="text-muted">Resumo do Pedido</span>
            <!-- <span class="badge badge-secondary badge-pill"> 3 </span> -->
          </h4>
          <ul class="list-group mb-3">
            <!-- divItens: LOOP para lista de itens do carrinho -->
            <div id="divItens"></div>
            <!-- divItens: Fim do LOOP  -->
          </ul>

          <button class="btn btn-outline-success btn-lg btn-block" type="submit">Finalizar Compra</button>
        </div>
      </div>
    </form>
  </div>
</section>

<!-- <script 
  crossorigin="anonymous"
  integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
  src="https://code.jquery.com/jquery-3.5.1.slim.min.js">
</script>
<script 
  crossorigin="anonymous"
  integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
  src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js">
</script>
<script 
  crossorigin="anonymous"
  integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
  src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js">
</script>
<script 
  crossorigin="anonymous"
  integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
  src="https://code.jquery.com/jquery-3.3.1.slim.min.js">
</script> -->

<%- include('components/foot') %>
