<%- include('../components/head') %> <%- include('../components/navbar') %>

<section>
  <div class="corpo container-fluid text-branco">
    <div class="row g-1">
      <%- include('../components/lateral-menu') %>

      <div class="col-sm px-3">
        <h4>Categorias</h4>
        <hr class="mb-4" />

        <!-- CODIGO AQUI -->
        <div class="max-width-610p list-group">
          <div class="list-group-item list-group-item-action">
            <div class="row g-1 w-100">
              <!-- Button trigger modal Cadastrar -->
              <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
                Cadastrar
              </button>
            </div>
          </div>

          <!-- Modal Cadastrar -->
          <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
              <form class="modal-content text-black" action="/categorias/cadastrar-categoria" method="post">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">Cadastrar Categoria</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <label class="copy-h6-format">Categoria</label>
                  <input type="text" name="nomeCategoria" class="form-control" placeholder="Ex: Cakeboard" required/>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Sair</button>
                  <button type="submit" class="btn btn-outline-success">Salvar</button>
                </div>
              </form>
            </div>
          </div>
          <!-- Fim Modal Cadastrar -->

          <% categorias.forEach(categoria => { %>
          <div class="list-group-item list-group-item-action">
            <div class="row g-1 mb-2">
              <div class="col-sm d-flex justify-content-around">
                <strong><%= categoria.nomeCategoria %></strong>
              </div>
            </div>
            <div class="row g-1">
              <div class="col-sm" action="/minha-conta/categorias" method="get">
                <!-- Button trigger modal Editar -->
                <button type="button" class="btn btn-outline-secondary w-100" data-bs-toggle="modal" data-bs-target="#id<%= categoria.id %>">
                  Editar
                </button>
              </div>
              <form class="col-sm" action="/minha-conta/categorias" method="get">
                <input type="hidden" name="variavel" value="valor"/>
                <button type="submit" class="btn btn-outline-danger w-100" onClick="if(!(confirm('Deseja mesmo excluir esta categoria?'))) return false">Excluir</button>
              </form>
            </div>
          </div>

          <!-- Modal Editar -->
          <div class="modal fade" id="id<%= categoria.id %>" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
              <form class="modal-content text-black" action="/categorias/alterar-categoria?_method=PUT" method="post">
                <div class="modal-header">
                  <h5 class="modal-title" id="staticBackdropLabel">Editar Categoria</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <label class="copy-h6-format">Categoria</label>
                  <input type="text" name="nomeCategoria" value="<%= categoria.nomeCategoria %>" class="form-control" placeholder="Ex: Cakeboard" required/>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Sair</button>     
                  <input type="hidden" name="id" value="<%= categoria.id %> "/>
                  <button type="submit" class="btn btn-outline-success">Salvar</button>
                </div>
              </form>
            </div>
          </div>
          <!-- fim Modal Editar -->

          <% }); %>
        </div>      
        
        <!-- FIM DO CODIGO -->
      </div>
    </div>
  </div>
</section>

<%- include('../components/foot') %>
